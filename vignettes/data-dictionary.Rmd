---
title: "Data Dictionary"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Data Dictionary}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## Overview

This document describes all datasets in the Iowa Cities Data project. All raw data files are located in `data/raw/` and should never be modified directly.

## Dataset Summary

| Dataset | File | Rows | Description |
|---------|------|------|-------------|
| Major Cities | `iowa_major_cities.csv` | 30 | Base city information |
| Crime | `iowa_crime_data.csv` | 30 | Crime and safety metrics |
| Housing | `iowa_housing_data.csv` | 30 | Housing market data |
| Education | `iowa_education_data.csv` | 30 | Education statistics |
| Economic | `iowa_economic_data.csv` | 30 | Economic indicators |
| Healthcare | `iowa_healthcare_data.csv` | 30 | Health metrics |
| Demographics | `iowa_demographics_data.csv` | 30 | Population demographics |
| Environment | `iowa_environment_data.csv` | 30 | Environmental quality |
| Amenities | `iowa_amenities_data.csv` | 30 | Quality of life |
| Historical | `iowa_historical_data.csv` | 30 | 40-year trend data |

---

## iowa_major_cities.csv

Base information for Iowa's 30 major cities.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| `city` | character | City name (primary key) | "Des Moines" |
| `region` | character | Geographic region | "Central" |
| `population` | integer | Total population | 214133 |
| `lat` | numeric | Latitude coordinate | 41.5868 |
| `lon` | numeric | Longitude coordinate | -93.6250 |

**Regions:** Central, Eastern, Western, Northern, Southern

---

## iowa_crime_data.csv

Crime statistics and safety metrics.

| Column | Type | Description | Unit |
|--------|------|-------------|------|
| `city` | character | City name | - |
| `violent_crime_rate` | numeric | Violent crimes per 100K | per 100,000 |
| `property_crime_rate` | numeric | Property crimes per 100K | per 100,000 |
| `total_crime_rate` | numeric | All crimes per 100K | per 100,000 |
| `police_per_capita` | numeric | Police officers per 1000 | per 1,000 |
| `clearance_rate` | numeric | Crimes solved percentage | percent |

**Lower is better** for crime rates.

---

## iowa_housing_data.csv

Housing market and affordability data.

| Column | Type | Description | Unit |
|--------|------|-------------|------|
| `city` | character | City name | - |
| `median_home_value` | integer | Median home price | USD |
| `median_rent` | integer | Median monthly rent | USD |
| `homeownership_rate` | numeric | Owner-occupied homes | percent |
| `vacancy_rate` | numeric | Vacant housing units | percent |
| `housing_cost_burden` | numeric | Income spent on housing | percent |
| `homes_built_last_10yr` | numeric | New construction rate | percent |

**Housing Cost Burden:** Percentage of households spending >30% of income on housing.

---

## iowa_education_data.csv

Education quality and attainment.

| Column | Type | Description | Unit |
|--------|------|-------------|------|
| `city` | character | City name | - |
| `graduation_rate` | numeric | High school graduation | percent |
| `pct_bachelors` | numeric | Bachelor's degree or higher | percent |
| `pct_graduate` | numeric | Graduate degree | percent |
| `student_teacher_ratio` | numeric | Students per teacher | ratio |
| `school_spending_per_pupil` | integer | Education spending | USD |
| `pct_in_school` | numeric | School enrollment rate | percent |

---

## iowa_economic_data.csv

Economic indicators and employment.

| Column | Type | Description | Unit |
|--------|------|-------------|------|
| `city` | character | City name | - |
| `median_household_income` | integer | Median annual income | USD |
| `per_capita_income` | integer | Per person income | USD |
| `unemployment_rate` | numeric | Unemployed percentage | percent |
| `poverty_rate` | numeric | Below poverty line | percent |
| `labor_force_participation` | numeric | Working-age employed | percent |
| `job_growth_5yr` | numeric | 5-year employment change | percent |

---

## iowa_healthcare_data.csv

Health outcomes and access.

| Column | Type | Description | Unit |
|--------|------|-------------|------|
| `city` | character | City name | - |
| `life_expectancy` | numeric | Average lifespan | years |
| `physicians_per_10000` | numeric | Doctor availability | per 10,000 |
| `hospital_beds_per_1000` | numeric | Hospital capacity | per 1,000 |
| `pct_insured` | numeric | Health insurance coverage | percent |
| `pct_obese` | numeric | Obesity rate | percent |
| `pct_smokers` | numeric | Smoking rate | percent |

---

## iowa_demographics_data.csv

Population characteristics.

| Column | Type | Description | Unit |
|--------|------|-------------|------|
| `city` | character | City name | - |
| `median_age` | numeric | Median resident age | years |
| `pct_under_18` | numeric | Children percentage | percent |
| `pct_over_65` | numeric | Seniors percentage | percent |
| `diversity_index` | numeric | Racial diversity score | 0-100 |
| `foreign_born_pct` | numeric | Immigrants percentage | percent |
| `population_growth_5yr` | numeric | 5-year population change | percent |

---

## iowa_environment_data.csv

Environmental quality metrics.

| Column | Type | Description | Unit |
|--------|------|-------------|------|
| `city` | character | City name | - |
| `air_quality_index` | integer | EPA air quality | AQI (0-500) |
| `water_quality_score` | numeric | Drinking water quality | 0-100 |
| `green_space_pct` | numeric | Parks and green areas | percent |
| `walkability_score` | integer | Walk Score® | 0-100 |
| `bike_score` | integer | Bike Score® | 0-100 |
| `transit_score` | integer | Transit Score® | 0-100 |

**Air Quality Index:** Lower is better. Good (0-50), Moderate (51-100), Unhealthy (101+)

---

## iowa_amenities_data.csv

Quality of life and amenities.

| Column | Type | Description | Unit |
|--------|------|-------------|------|
| `city` | character | City name | - |
| `restaurants_per_capita` | numeric | Dining options | per 1,000 |
| `retail_per_capita` | numeric | Shopping options | per 1,000 |
| `recreation_facilities` | integer | Parks and rec centers | count |
| `cultural_venues` | integer | Museums, theaters, etc. | count |
| `libraries` | integer | Public libraries | count |
| `commute_time_avg` | numeric | Average commute | minutes |

---

## iowa_historical_data.csv

40-year historical trends (1980-2020).

| Column | Type | Description |
|--------|------|-------------|
| `city` | character | City name |
| `population_1980` | integer | 1980 population |
| `population_1990` | integer | 1990 population |
| `population_2000` | integer | 2000 population |
| `population_2010` | integer | 2010 population |
| `population_2020` | integer | 2020 population |
| `median_income_1980` | integer | 1980 median income (adjusted) |
| `median_income_1990` | integer | 1990 median income (adjusted) |
| `median_income_2000` | integer | 2000 median income (adjusted) |
| `median_income_2010` | integer | 2010 median income (adjusted) |
| `median_income_2020` | integer | 2020 median income |
| `home_value_1980` | integer | 1980 median home value (adjusted) |
| `home_value_2020` | integer | 2020 median home value |

**Note:** Historical income and home values are inflation-adjusted to 2020 dollars.

---

## Data Quality Notes

1. **Missing Values:** Some cities may have missing values for specific metrics. These are represented as `NA` in R.

2. **Data Sources:** Data compiled from US Census Bureau, FBI Uniform Crime Reports, Bureau of Labor Statistics, and state agencies.

3. **Update Frequency:** Raw data is updated annually. Check `data_timestamp` in the dashboard for last update.

4. **Normalization:** When comparing cities, all metrics are normalized to 0-100 scale using min-max normalization.

## Loading Data in R

```r
library(tidyverse)
library(here)

# Load a single dataset
crime <- read_csv(here("data/raw/iowa_crime_data.csv"), show_col_types = FALSE)

# Load all datasets
source(here("scripts/utils.R"))
all_data <- load_datasets()
```
